/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./assets/js/src/index.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./assets/js/src/Events.js":
/*!*********************************!*\
  !*** ./assets/js/src/Events.js ***!
  \*********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/**\n * Events\n *\n * A _very_ simple event manager.\n */\n\n/**\n * Events provides a VERY simple event manager, with just the minimum needed to support this app.\n *\n * @param eventSet : optional, pass an array of event types and the class will throw if an unknown event is\n * mentioned, useful for catching typos in event names\n * @constructor\n */\nclass Events {\n  constructor(eventSet) {\n    this.eventSet = eventSet;\n    this.eventHandlers = {};\n  }\n  /**\n   * Register for an event\n   *\n   * @param event    : the event (string) to listen for\n   * @param callback : function to call when event is triggered, args will be whatever is passed to trigger\n   * @param context  : optional, context for callback function\n   */\n\n\n  on(event, callback, context) {\n    if (this.eventSet && this.eventSet.indexOf(event) === -1) {\n      throw \"Unknown event: \" + event;\n    }\n\n    const handlers = this.eventHandlers[event] || (this.eventHandlers[event] = []);\n    handlers.push({\n      callback: callback,\n      context: context\n    });\n  }\n  /**\n   * Unregister for (an) event(s)\n   *\n   * @param event    : event (string) to stop listening, or undefined to match all events\n   * @param callback : function to remove, or undefined to match all functions\n   * @param context  : context to remove, optional\n   *\n   * Note: implication is that calling off() with no args removes all handlers for all events\n   */\n\n\n  off(event, callback, context) {\n    function filterCallback(element) {\n      return callback && callback != element.callback || context && context != element.context;\n    }\n\n    for (const evt in this.eventHandlers) {\n      if (!event || event == evt) {\n        this.eventHandlers[evt] = this.eventHandlers[evt].filter(filterCallback);\n      }\n    }\n  }\n  /**\n   * Triggers an event, calling all the handlers\n   *\n   * @param event : the event (string) to trigger\n   * @param args  : any/all remaining arguments to trigger will be passed to the handlers\n   */\n\n\n  trigger(event, args) {\n    if (this.eventSet && this.eventSet.indexOf(event) === -1) {\n      throw \"Unknown event: \" + event;\n    }\n\n    const handlers = this.eventHandlers[event];\n\n    if (handlers) {\n      for (var i = 0; i < handlers.length; i++) {\n        handlers[i].callback.apply(handlers[i].context, Array.prototype.slice.call(arguments, 1));\n      }\n    }\n  }\n\n}\n\n;\nconst events = new Events();\n/* harmony default export */ __webpack_exports__[\"default\"] = (events);\n\n//# sourceURL=webpack:///./assets/js/src/Events.js?");

/***/ }),

/***/ "./assets/js/src/Favorites.js":
/*!************************************!*\
  !*** ./assets/js/src/Favorites.js ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Events_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Events.js */ \"./assets/js/src/Events.js\");\n\n\nclass Favorites {\n  /**\n   * Get Favorites\n   */\n  getFavorites() {\n    jQuery.ajax({\n      url: ml_js_data.ajax_url,\n      method: 'POST',\n      dataType: 'json',\n      data: {\n        'action': 'ml_get_favorites',\n        'nonce': ml_js_data.nonce_get_favorites\n      }\n    }).done(function (data, textStatus, jqXHR) {\n      ml_js_data.favorites = data.data;\n      _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].trigger('getFavoritesDone', data);\n    }).fail(function (jqXHR, textStatus, errorThrown) {\n      console.log('getFavorites fail', errorThrown);\n      _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].trigger('getFavoritesFail', errorThrown);\n    });\n  }\n\n  /**\n   * Create Favorite\n   *\n   * @param {Number} id the Product ID to add to favorites\n   */\n  createFavorite(id) {\n    jQuery.ajax({\n      url: ml_js_data.ajax_url,\n      method: 'POST',\n      context: this,\n      dataType: 'json',\n      data: {\n        'action': 'ml_create_favorite',\n        'nonce': ml_js_data.nonce_create_favorite,\n        'songId': id\n      }\n    }).done(function (data, textStatus, jqXHR) {\n      if (data.data.meta_res) {\n        ml_js_data.favorites[id] = id;\n        _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].trigger('createFavoriteSuccess', id);\n        _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].trigger('favoritesCountChanged', this.countFavorites());\n      } else {\n        _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].trigger('createFavoriteFail', id);\n      }\n    }).fail(function (jqXHR, textStatus, errorThrown) {\n      console.log('fail', errorThrown);\n    });\n  }\n\n  /**\n   * Delete Favorite\n   *\n   * @param {Number} id the Product ID to delete from favorites\n   */\n  deleteFavorite(id) {\n    jQuery.ajax({\n      url: ml_js_data.ajax_url,\n      method: 'POST',\n      context: this,\n      dataType: 'json',\n      data: {\n        'action': 'ml_delete_favorite',\n        'nonce': ml_js_data.nonce_delete_favorite,\n        'songId': id\n      }\n    }).done(function (data, textStatus, jqXHR) {\n      if (data.data.meta_res) {\n        delete ml_js_data.favorites[id];\n        _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].trigger('deleteFavoriteSuccess', id);\n        _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].trigger('favoritesCountChanged', this.countFavorites());\n      } else {\n        _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].trigger('deleteFavoriteFail', id);\n      }\n    }).fail(function (jqXHR, textStatus, errorThrown) {\n      console.log('fail', errorThrown);\n    });\n  }\n\n  /**\n   * Determine if a Product is a favorite\n   *\n   * @param {Number} id the Product ID to search user's favorites for\n   * @return {boolean} true if product is a favorite, false if not\n   */\n  isFavorite(id) {\n    return ml_js_data.favorites && ml_js_data.favorites[id] ? true : false;\n  }\n\n  countFavorites() {\n    return Object.keys(ml_js_data.favorites).length;\n  }\n\n}\n\n;\nconst favorites = new Favorites();\n/* harmony default export */ __webpack_exports__[\"default\"] = (favorites);\n\n//# sourceURL=webpack:///./assets/js/src/Favorites.js?");

/***/ }),

/***/ "./assets/js/src/Utilities.js":
/*!************************************!*\
  !*** ./assets/js/src/Utilities.js ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Events_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Events.js */ \"./assets/js/src/Events.js\");\n\n\nclass Utilities {\n  /**\n   * Set a module's state\n   *\n   * @param {Object} obj the state object to set\n   * @param {Object} state the local state object\n   */\n  setState(obj, state) {\n    let updated = false;\n\n    for (const prop in obj) {\n      if (obj.hasOwnProperty(prop)) {\n        state[prop] = obj[prop];\n        updated = true;\n      }\n    }\n\n    if (updated) {\n      _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].trigger('stateUpdate', state);\n    }\n  }\n  /**\n   * Get Posts\n   *\n   * @param {array}   _args  Filter arguments\n   * @param {number}  _page  The page to retrieve\n   * @param {String}  nonce the nonce\n   * @param {boolean} append True to append data to list. False to empty list.\n   */\n\n\n  getPosts(_args, _page, nonce, append) {\n    let page = _page || 1;\n    jQuery.ajax({\n      // contentType: 'application/json',\n      // processData: false,\n      url: ml_js_data.ajax_url,\n      method: 'POST',\n      dataType: 'json',\n      data: {\n        'action': 'ml_get_posts',\n        'nonce': nonce,\n        'page': page,\n        'pageTemplate': ml_js_data.page_template_slug,\n        'filters': JSON.stringify(_args)\n      }\n    }).done(function (data, textStatus, jqXHR) {\n      _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].trigger('getPostsDone', data, _page, append);\n    }).fail(function (jqXHR, textStatus, errorThrown) {\n      _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].trigger('getPostsFail', errorThrown, _args, _page, nonce, append);\n    });\n  }\n  /**\n   * Determines if user is logged in\n   *\n   * @return {Boolean} true if user is logged in. false if user is logged out.\n   */\n\n\n  isUserLoggedIn() {\n    return ml_js_data.user_logged_in ? true : false;\n  }\n  /**\n   * Check if a Product is the currently loaded Product\n   *\n   * @param {Number} id the Product ID\n   * @return {Boolean}\n   */\n\n\n  isCurrentSong(id) {\n    return id === this.getCurrentSongId() ? true : false;\n  }\n  /**\n   * Gets the current Product ID\n   *\n   * @return {Number} the current Product ID\n   */\n\n\n  getCurrentSongId() {\n    return ml_js_data.current_song.id;\n  }\n  /**\n   * Set the current Product ID\n   *\n   * @return {Number} the current Product ID\n   */\n\n\n  setCurrentSongId(id) {\n    ml_js_data.current_song.id = Number(id);\n    return ml_js_data.current_song.id;\n  }\n  /**\n   * Reset current Product ID\n   */\n\n\n  resetCurrentSongId() {\n    ml_js_data.current_song.id = 0;\n  }\n\n  isCurrentSongPlaying() {\n    return ml_js_data.current_song.isPlaying;\n  }\n  /**\n   * Set the current Product playing state\n   *\n   * @param {Boolean} isPlaying true if the song is playing\n   */\n\n\n  setCurrentSongPlayingState(isPlaying) {\n    ml_js_data.current_song.isPlaying = isPlaying;\n  }\n\n  resetCurrentSongPlayingState() {\n    this.setCurrentSongPlayingState(false);\n  }\n  /**\n   * Close Magnific Popup via API\n   */\n\n\n  closeMagnificPopup() {\n    jQuery.magnificPopup.close();\n  }\n  /**\n   * Redirect to URL\n   *\n   * @param {String} url the URL to redirect to\n   */\n\n\n  redirectToUrl(url) {\n    window.location.href = url;\n  }\n\n}\n\n; // Utilities\n\nconst utils = new Utilities();\n/* harmony default export */ __webpack_exports__[\"default\"] = (utils);\n\n//# sourceURL=webpack:///./assets/js/src/Utilities.js?");

/***/ }),

/***/ "./assets/js/src/confirmDialog.js":
/*!****************************************!*\
  !*** ./assets/js/src/confirmDialog.js ***!
  \****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Events_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Events.js */ \"./assets/js/src/Events.js\");\n/* harmony import */ var _Utilities_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Utilities.js */ \"./assets/js/src/Utilities.js\");\n\n\n\nconst confirmDialog = function () {\n  const ID_CONFIRM_DIALOG = 'confirm-dialog',\n        ID_CONFIRM_DIALOG_TITLE = 'confirm-dialog__title',\n        ID_CONFIRM_DIALOG_DESC = 'confirm-dialog__description',\n        ID_CONFIRM_DIALOG_ACCEPT = 'confirm-dialog__accept',\n        ID_CONFIRM_DIALOG_REJECT = 'confirm-dialog__reject';\n  let $confirmDialog, $confirmDialogTitle, $confirmDialogDesc, $btnConfirmDialogAccept, $btnConfirmDialogReject;\n\n  function init() {\n    if (cacheDom()) {\n      bindEvents();\n      render();\n    }\n  }\n\n  function cacheDom() {\n    $confirmDialog = jQuery('#' + ID_CONFIRM_DIALOG);\n    $confirmDialogTitle = $confirmDialog.find('#' + ID_CONFIRM_DIALOG_TITLE);\n    $confirmDialogDesc = $confirmDialog.find('#' + ID_CONFIRM_DIALOG_DESC);\n    $btnConfirmDialogAccept = $confirmDialog.find('#' + ID_CONFIRM_DIALOG_ACCEPT);\n    $btnConfirmDialogReject = $confirmDialog.find('#' + ID_CONFIRM_DIALOG_REJECT);\n    return $confirmDialog.length ? true : false;\n  }\n\n  function bindEvents() {\n    $btnConfirmDialogAccept.on('click', handleConfirmDialogAccept);\n    $btnConfirmDialogReject.on('click', handleConfirmDialogReject);\n    _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].on('openConfirmDialog', openConfirmDialog);\n  }\n\n  function render() {}\n\n  function openConfirmDialog(e) {\n    const url = e.target.dataset.redirectUrl,\n          title = e.target.dataset.dialogTitle,\n          desc = e.target.dataset.dialogDescription;\n    $btnConfirmDialogAccept.attr('data-redirect-url', url);\n\n    if (title) {\n      $confirmDialogTitle.text(title);\n    }\n\n    if (desc) {\n      $confirmDialogDesc.text(desc);\n    } // Open confirmation dialog\n\n\n    jQuery(e.target).magnificPopup({\n      type: 'inline',\n      mainClass: 'mfp-confirm-popup mfp-fade',\n      closeOnBgClick: true,\n      removalDelay: 300,\n      // closeMarkup: '<button title=\"%title%\" type=\"button\" class=\"mfp-close\">&times;</button>',\n      showCloseBtn: false\n    }).magnificPopup('open');\n  }\n\n  function handleConfirmDialogAccept(e) {\n    e.preventDefault();\n    _Utilities_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].redirectToUrl(e.target.dataset.redirectUrl);\n  }\n\n  function handleConfirmDialogReject(e) {\n    e.preventDefault();\n    resetRedirectUrl();\n    _Utilities_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].closeMagnificPopup();\n  }\n\n  function resetRedirectUrl() {\n    $btnConfirmDialogAccept.attr('data-redirect-url', '');\n  }\n\n  return {\n    init\n  };\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (confirmDialog);\n\n//# sourceURL=webpack:///./assets/js/src/confirmDialog.js?");

/***/ }),

/***/ "./assets/js/src/favoritesHeader.js":
/*!******************************************!*\
  !*** ./assets/js/src/favoritesHeader.js ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Events_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Events.js */ \"./assets/js/src/Events.js\");\n\n\nconst favoritesHeader = function () {\n  const CLASS_HEADER_FAVORITES_LINK = 'site-header-favorites__link';\n  let $favoritesHeaderLink;\n\n  function init() {\n    if (cacheDom()) {\n      bindEvents();\n    }\n  }\n\n  function cacheDom() {\n    $favoritesHeaderLink = jQuery('.' + CLASS_HEADER_FAVORITES_LINK);\n    return $favoritesHeaderLink.length ? true : false;\n  }\n\n  function bindEvents() {\n    _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].on('favoritesCountChanged', handleFavoritesCountChanged, this);\n  }\n\n  function handleFavoritesCountChanged(count) {\n    $favoritesHeaderLink.attr('data-favorites', count);\n  }\n\n  return {\n    init\n  };\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (favoritesHeader);\n\n//# sourceURL=webpack:///./assets/js/src/favoritesHeader.js?");

/***/ }),

/***/ "./assets/js/src/index.js":
/*!********************************!*\
  !*** ./assets/js/src/index.js ***!
  \********************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _player_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./player.js */ \"./assets/js/src/player.js\");\n/* harmony import */ var _confirmDialog_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./confirmDialog.js */ \"./assets/js/src/confirmDialog.js\");\n/* harmony import */ var _favoritesHeader_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./favoritesHeader.js */ \"./assets/js/src/favoritesHeader.js\");\n/* harmony import */ var _musicList_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./musicList.js */ \"./assets/js/src/musicList.js\");\n/* harmony import */ var _musicListFilters_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./musicListFilters.js */ \"./assets/js/src/musicListFilters.js\");\n/* harmony import */ var _licenseDialog_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./licenseDialog.js */ \"./assets/js/src/licenseDialog.js\");\n/* harmony import */ var _popupPlayer_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./popupPlayer.js */ \"./assets/js/src/popupPlayer.js\");\n// Modules\n\n\n\n\n\n\n // Init\n\n(function () {\n  _player_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].init();\n  _confirmDialog_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].init();\n  _favoritesHeader_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].init();\n  _musicList_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].init();\n  _musicListFilters_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].init();\n  _licenseDialog_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].init();\n  _popupPlayer_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].init();\n})();\n\n//# sourceURL=webpack:///./assets/js/src/index.js?");

/***/ }),

/***/ "./assets/js/src/licenseDialog.js":
/*!****************************************!*\
  !*** ./assets/js/src/licenseDialog.js ***!
  \****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Events_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Events.js */ \"./assets/js/src/Events.js\");\n/* harmony import */ var _Utilities_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Utilities.js */ \"./assets/js/src/Utilities.js\");\n\n\n\nconst licenseDialog = function () {\n  const ID_BTN_ADD_TO_CART = 'btn-add-to-cart',\n        ID_CLOSE_DIALOG = 'btn-close-license-dialog',\n        ID_LICENSE_DIALOG = 'license-dialog',\n        ID_PRODUCT_VARIATIONS = 'product-variations',\n        ID_VARIATION_PRICE = 'product-variation-price',\n        CLASS_PRODUCT_VARS_LOAD = 'product-variations--loading',\n        CLASS_ARTIST = 'license-dialog__song-artist',\n        CLASS_IMAGE = 'license-dialog__song-image',\n        CLASS_LINK = 'license-dialog__song-link',\n        CLASS_TITLE = 'license-dialog__song-title';\n  let $body, $licenseDialog, $btnAddToCart, $productVariations, $selects, $songArtist, $songImage, $songLink, $songTitle, $variationPrice;\n  let state = {\n    'productId': null,\n    'termData': null,\n    'variations': null,\n    'variationAttrsAll': null,\n    'variationLabels': null,\n    'variationAttrs': null,\n    'selectedAttrs': null,\n    // selected Product Variation attributes (drill down)\n    'individualType': false\n  };\n\n  function init() {\n    if (cacheDom()) {\n      bindEvents();\n    }\n  }\n\n  function cacheDom() {\n    $body = jQuery('body');\n    $licenseDialog = $body.find('#' + ID_LICENSE_DIALOG);\n    $btnAddToCart = $licenseDialog.find('#' + ID_BTN_ADD_TO_CART);\n    $productVariations = $licenseDialog.find('#' + ID_PRODUCT_VARIATIONS);\n    $songArtist = $licenseDialog.find('.' + CLASS_ARTIST);\n    $songImage = $licenseDialog.find('.' + CLASS_IMAGE + ' img');\n    $songLink = $licenseDialog.find('.' + CLASS_LINK);\n    $songTitle = $licenseDialog.find('.' + CLASS_TITLE);\n    $variationPrice = $licenseDialog.find('#' + ID_VARIATION_PRICE);\n    return $licenseDialog.length ? true : false;\n  }\n\n  function bindEvents() {\n    $songLink.on('click', handleClickSongLink);\n    $btnAddToCart.on('click', handleAddToCartClick);\n    $licenseDialog.on('change', 'select', handleSelectChange);\n    _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].on('clickLicense', handleLicenseClick, this);\n    _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].on('getProductVariationsDone', handleGetProductVariationsDone, this);\n    _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].on('addVariationToCartDone', handleAddVariationToCartDone, this);\n    _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].on('mfpCloseLicenseDialog', handleCloseDialog, this);\n  }\n\n  function handleClickSongLink(e) {\n    e.preventDefault();\n    _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].trigger('clickPlayPauseList', e);\n  }\n\n  function handleAddToCartClick(e) {\n    console.log('handleAddToCartClick');\n    e.preventDefault();\n    let product_id = this.dataset.productId;\n    let quantity = this.dataset.quantity;\n    let variation_id = this.dataset.variationId;\n    let variation_data = this.dataset.variationData; // displayed on cart.php if included\n\n    let data = {\n      'product_id': product_id,\n      'quantity': quantity,\n      'variation_id': variation_id,\n      'variation_data': variation_data\n    }; // trigger jQuery WooCommerce events\n\n    $body.trigger('adding_to_cart', [jQuery(this), data]);\n    addToCart(product_id, quantity, variation_id, variation_data);\n  }\n\n  function addToCart(product_id, quantity, variation_id, variation_data) {\n    jQuery.ajax({\n      url: ml_js_data.ajax_url,\n      method: 'POST',\n      dataType: 'json',\n      data: {\n        'action': 'ml_add_to_cart_variation',\n        'product_id': product_id,\n        'quantity': quantity,\n        'variation_id': variation_id,\n        'variation_data': variation_data,\n        'nonce': ml_js_data.nonce_add_to_cart_variation\n      }\n    }).done(function (data, textStatus, jqXHR) {\n      console.log('addToCart data', data);\n\n      if (data.error && data.product_url) {\n        window.location = data.product_url;\n        console.log('error, redirecting');\n      } else {\n        // trigger jQuery WooCommerce event\n        $body.trigger('added_to_cart', [data.fragments, data.cart_hash]);\n      }\n\n      _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].trigger('addVariationToCartDone', data);\n    }).fail(function (jqXHR, textStatus, errorThrown) {\n      console.log('addToCart fail', errorThrown);\n    });\n  }\n\n  function handleAddVariationToCartDone(data) {\n    console.log('handleAddVariationToCartDone', data);\n    reset();\n    _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].trigger('closeLicenseDialog', state.productId);\n  }\n\n  function handleCloseDialog() {\n    reset();\n    _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].trigger('closeLicenseDialog', state.productId);\n  }\n\n  function handleSelectChange(e) {\n    // save / remove <select> id from state\n    if (e.target.options[e.target.selectedIndex].value) {\n      _Utilities_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setState({\n        'selectedAttrs': { ...state.selectedAttrs,\n          [e.target.id]: e.target.options[e.target.selectedIndex].value\n        }\n      }, state);\n    } else {\n      _Utilities_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setState({\n        'selectedAttrs': { ...state.selectedAttrs,\n          [e.target.id]: null\n        }\n      }, state);\n    } // handle special case \"Customer Type: Individual\"\n\n\n    if (ml_js_data.customer_type_individual) {\n      // resets all selects to default values\n      if (maybeResetVariationValues()) {\n        console.log('variationValuesReset');\n        return;\n      } // handle Customer Type select\n\n\n      if (e.target.id === 'select-pa_customer-type') {\n        handleCustomerTypeIndividual(e);\n        maybeToggleAddToCartButton();\n      } else {\n        productDrillDown(state.selectedAttrs, e);\n        maybeToggleAddToCartButton();\n      }\n    } else {\n      // resets all selects to default values\n      if (maybeResetVariationValues()) {\n        console.log('variationValuesReset');\n        return;\n      }\n\n      productDrillDown(state.selectedAttrs, e);\n      maybeToggleAddToCartButton();\n    }\n  }\n\n  function handleCustomerTypeIndividual(e) {\n    if (!state.individualType && state.selectedAttrs['select-pa_customer-type'] === 'individual') {\n      // reset\n      $selects.each(function (index) {\n        if (index > 0) {\n          this.value = '';\n          _Utilities_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setState({\n            'selectedAttrs': { ...state.selectedAttrs,\n              [this.id]: null\n            }\n          }, state);\n        }\n      }); // productDrillDown populates selects with `individual` attribute options\n\n      productDrillDown(state.selectedAttrs, e); // set all other attributes to Individual\n\n      $selects.each(function (index) {\n        if (index > 0) {\n          this.value = 'individual';\n          _Utilities_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setState({\n            'selectedAttrs': { ...state.selectedAttrs,\n              [this.id]: this.value\n            }\n          }, state);\n          this.disabled = true;\n        }\n      });\n      _Utilities_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setState({\n        'individualType': true\n      }, state);\n    } else if (state.individualType) {\n      $selects.each(function (index) {\n        if (index > 0) {\n          this.value = '';\n          _Utilities_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setState({\n            'selectedAttrs': { ...state.selectedAttrs,\n              [this.id]: null\n            }\n          }, state);\n          this.disabled = false;\n        }\n      });\n      _Utilities_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setState({\n        'individualType': false\n      }, state);\n      productDrillDown(state.selectedAttrs, e);\n    } else {\n      productDrillDown(state.selectedAttrs, e);\n    }\n  }\n\n  function maybeToggleAddToCartButton() {\n    let toggle = true;\n    $selects.each(function () {\n      if (!this.value) {\n        toggle = false;\n        return false; // break .each()\n      }\n    });\n    toggleAddToCartButton(toggle);\n  }\n\n  function toggleAddToCartButton(enable) {\n    // get varation data\n    const variation_data = getProductVariationDataBySelectedAttributes();\n\n    if (enable && variation_data) {\n      // enable\n      $btnAddToCart.removeAttr('disabled'); // update variation price with Product data\n\n      updateVariationPrice(variation_data); // show variation price\n\n      showVariationPrice(); // update button with Product data\n\n      updateAddToCartButtonData(variation_data);\n    } else {\n      // disable\n      $btnAddToCart.attr('disabled', ''); // hide variation price\n\n      hideVariationPrice(); // reset variation price\n\n      resetVariationPrice(); // reset button data\n\n      resetAddToCartButtonData();\n    }\n  }\n\n  function updateVariationPrice(variation_data) {\n    // const variation_data = getProductVariationDataBySelectedAttributes();\n    $variationPrice.html(variation_data.price_html);\n  }\n\n  function resetVariationPrice() {\n    $variationPrice.empty();\n  }\n\n  function showVariationPrice() {\n    $variationPrice.css('display', 'block');\n  }\n\n  function hideVariationPrice() {\n    $variationPrice.css('display', 'none');\n  }\n\n  function updateAddToCartButtonData(variation_data) {\n    let product_id = state.productId; // let variation_id   = getProductVariationIdBySelectedAttributes();\n\n    let variation_id = variation_data.variation_id;\n    let quantity = 1;\n    let variation_attrs = JSON.stringify(getSelectedAttributes()); // array displayed on cart.php\n\n    $btnAddToCart.attr('data-product-id', product_id);\n    $btnAddToCart.attr('data-variation-id', variation_id);\n    $btnAddToCart.attr('data-quantity', quantity);\n    $btnAddToCart.attr('data-variation-data', variation_attrs);\n  }\n\n  function resetAddToCartButtonData() {\n    $btnAddToCart.attr('data-product-id', '');\n    $btnAddToCart.attr('data-variation-id', '');\n    $btnAddToCart.attr('data-quantity', '0');\n    $btnAddToCart.attr('data-variation-data', '');\n  }\n\n  function handleLicenseClick(data) {\n    // reset existing product variations and license dialog\n    reset(); // get product variations\n\n    $productVariations.toggleClass(CLASS_PRODUCT_VARS_LOAD);\n    getProductVariations(data.id); // render product details\n\n    renderProductDetails(data); // show();\n  }\n\n  function handleGetProductVariationsDone(data) {\n    setVariationAttributes();\n    $productVariations.toggleClass(CLASS_PRODUCT_VARS_LOAD);\n    render(data);\n  }\n\n  function getSelectedAttributes() {\n    const _attrs = {};\n\n    for (const prop in state.selectedAttrs) {\n      if (state.selectedAttrs.hasOwnProperty(prop)) {\n        let _prop = prop.replace('select-', 'attribute_');\n\n        _attrs[_prop] = state.selectedAttrs[prop];\n      }\n    }\n\n    return _attrs;\n  }\n  /**\n   * Set variation attributes for active products\n   * Called in event handler for dependency on data from server\n   */\n\n\n  function setVariationAttributes() {\n    let _attrs = collectAllProductVariationAttributes();\n\n    let attrs = {};\n\n    for (const prop in _attrs) {\n      if (_attrs.hasOwnProperty(prop)) {\n        attrs[prop.replace('attribute_', '')] = _attrs[prop];\n      }\n    }\n\n    _Utilities_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setState({\n      'variationAttrs': attrs\n    }, state);\n    console.log('setVarAttrs', state);\n  }\n  /**\n   * Get Product Variations\n   *\n   * @param {Number} id the Product ID\n   */\n\n\n  function getProductVariations(id) {\n    jQuery.ajax({\n      url: ml_js_data.ajax_url,\n      method: 'POST',\n      dataType: 'json',\n      data: {\n        'action': 'ml_get_product_variations',\n        'id': id,\n        'nonce': ml_js_data.nonce_get_product\n      }\n    }).done(function (data, textStatus, jqXHR) {\n      console.log('getProductVariations data', data);\n      _Utilities_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setState({\n        'productId': data.data.product_id,\n        'termData': data.data.term_data,\n        'variations': data.data.variations,\n        'variationAttrsAll': data.data.variation_attrs,\n        'variationLabels': data.data.variation_labels\n      }, state);\n      _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].trigger('getProductVariationsDone', state);\n    }).fail(function (jqXHR, textStatus, errorThrown) {\n      console.log('getProductVariations fail', errorThrown);\n    });\n  }\n\n  function getProductVariationDataBySelectedAttributes() {\n    let index = collectProductVariationsByValues(state.selectedAttrs);\n    let variation_data = state.variations[index];\n    return variation_data || null;\n  }\n\n  function getProductVariationIdBySelectedAttributes() {\n    let variation_data = getProductVariationDataBySelectedAttributes();\n    let variation_id = variation_data.variation_id;\n    return variation_id || null;\n  }\n  /**\n   * Filter the Product Variations\n   *\n   * @param {object} selectedAttrs the selected attributes\n   * @param {object} e the <select> `change` event\n   */\n\n\n  function productDrillDown(selectedAttrs, e) {\n    console.log('productDrillDown', selectedAttrs); // collect all product variations that match value(s)\n\n    let matches = null; // Product Variation Indexes\n\n    let allAttributes = null; // Product Variation Attributes of matched Product Variations\n\n    let _selectedAttrs = {}; // !== null Selected Attributes\n\n    for (const prop in selectedAttrs) {\n      if (selectedAttrs.hasOwnProperty(prop) && selectedAttrs[prop] !== null) {\n        _selectedAttrs[prop] = selectedAttrs[prop];\n      }\n    }\n\n    matches = collectProductVariationsByValues(_selectedAttrs); // collect all product variation attributes\n\n    if (matches && matches.length) {\n      allAttributes = collectProductVariationAttributes(matches);\n    } else {\n      // no matching Product Variations\n      // reset all <select>s except the last selected one\n      resetSelectedAttributes(e.target.id); // search for Product Variations by the last selected <select>\n\n      matches = collectProductVariationsByValues([state.selectedAttrs[e.target.id]]);\n      allAttributes = collectProductVariationAttributes(matches);\n    } // re-render available options\n\n\n    updateVariationValues(allAttributes);\n  }\n  /**\n   * Reset Selected Attributes\n   *\n   * @param {string} selectId the <select> ID to skip resetting\n   */\n\n\n  function resetSelectedAttributes(selectId) {\n    for (const prop in state.selectedAttrs) {\n      if (state.selectedAttrs.hasOwnProperty(prop)) {\n        if (selectId === prop) {\n          continue;\n        } else {\n          _Utilities_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setState({\n            'selectedAttrs': { ...state.selectedAttrs,\n              [prop]: null\n            }\n          }, state);\n        }\n      }\n    }\n\n    $selects.each(function (index) {\n      if (!this.id === selectId) {\n        this.value = '';\n      }\n    });\n    console.log('resetSelectedAttributes', state.selectedAttrs);\n  }\n  /**\n   * Collect Product Variations by Values\n   *\n   * @param {object} values the values to search for\n   * @return boolean|array Product Variation indexes matching test\n   */\n\n\n  function collectProductVariationsByValues(values) {\n    console.log('collectProdVarsByVals', values);\n\n    if (!state.variations) {\n      return false;\n    }\n\n    let variationMatches = []; // variation index matches\n    // search each product variation\n\n    for (let i = 0; i < state.variations.length; i++) {\n      let _attrs = state.variations[i].attributes;\n      let attrMatches = 0; // how many matches found\n      // search for each value in this variation's attributes\n\n      for (const prop in values) {\n        if (values.hasOwnProperty(prop)) {\n          let _prop = prop.replace('select-', 'attribute_');\n\n          if (_attrs[_prop] === \"\" || _attrs[_prop] === values[prop]) {\n            attrMatches++;\n          }\n        }\n      } // if all values have been found\n\n\n      if (attrMatches === Object.keys(values).length) {\n        // save this variation index to variationMatches\n        variationMatches.push(i);\n        continue; // break and search next product variation\n      }\n    } // variations\n\n\n    return variationMatches;\n  }\n  /**\n   * Collect Product Variations by Values\n   *\n   * @param {array} values the values to search for\n   * @return boolean|array Product Variation indexes matching test\n   */\n\n\n  function collectProductVariationsByValuesOrig(values) {\n    console.log('collectProdVarsByVals', values);\n\n    if (!state.variations) {\n      return false;\n    }\n\n    let variationMatches = []; // variation index matches\n    // search each product variation\n\n    for (let i = 0; i < state.variations.length; i++) {\n      let _attrs = state.variations[i].attributes;\n      let attrMatches = 0; // how many matches found\n      // search for each value\n\n      for (let j = 0; j < values.length; j++) {\n        // search each attribute for each value\n        // a `match` is === `value` or `any` (represented by an empty string)\n        for (let prop in _attrs) {\n          if (_attrs.hasOwnProperty(prop) && (values[j] === _attrs[prop] || \"\" === _attrs[prop])) {\n            // increment attrMatches\n            attrMatches++;\n            break; // break _attr loop and search for next value;\n          } // values[j] === attribute\n\n        } // attributes\n        // if all values have been found\n\n\n        if (attrMatches === values.length) {\n          // save this variation index to variationMatches\n          variationMatches.push(i);\n          break; // break and search next product variation\n        }\n      } // values\n\n    } // variations\n\n\n    return variationMatches;\n  }\n  /**\n   * Collect Product Variations by Value\n   *\n   * @param array\n   * @return boolean|array Product IDs matching test\n   */\n\n\n  function collectProductVariationsByValue(value) {\n    console.log('collectProdVarsByVal', value);\n\n    if (!state.variations) {\n      return false;\n    }\n\n    let matches = [];\n\n    for (let i = 0; i < state.variations.length; i++) {\n      let _attrs = state.variations[i].attributes;\n\n      for (let prop in _attrs) {\n        console.log('prop in attrs', prop);\n\n        if (value === _attrs[prop]) {\n          console.log('value:', value, ' === ', _attrs[prop]); // save id to matches\n\n          matches.push(i); // break\n\n          break;\n        }\n      }\n    }\n\n    console.log('matches', matches);\n    return matches;\n  }\n  /**\n   * Collect All Product Variation Attributes by Product Variation IDs\n   *\n   * @param {array} productIds the Product Variation IDs\n   * @return boolean|object Product Variations and Attributes matching test\n   */\n\n\n  function collectProductVariationAttributes(productIds) {\n    let _productIds = productIds;\n    let allAttributes = {};\n\n    for (let i = 0; i < _productIds.length; i++) {\n      let index = _productIds[i]; // the index of the matched Product Variation\n\n      let _attrs = state.variations[index].attributes; // iterate through variation attributes object\n\n      for (let prop in _attrs) {\n        if (!_attrs.hasOwnProperty(prop)) {\n          continue;\n        } // check if key exists in allAttributes object\n\n\n        if (!allAttributes[prop]) {\n          // add it as new key and initialize it as array\n          allAttributes[prop] = []; // if current value === `any/wildcard`, add all attributes from current key\n\n          if (_attrs[prop] === \"\") {\n            console.log('any/wildcard, adding all attributes from: ', prop, state.variationAttrs[prop.replace('attribute_', '')]);\n            allAttributes[prop] = state.variationAttrs[prop.replace('attribute_', '')];\n          } // add current value to array if truthy\n          else if (_attrs[prop]) {\n              console.log('_attrs[prop]', _attrs[prop]);\n              allAttributes[prop].push(_attrs[prop]);\n            }\n        } else {\n          // key already exists in allAttributes object\n          // test for value uniqueness\n          if (allAttributes[prop].length) {\n            for (let j = 0, unique = true; j < allAttributes[prop].length; j++) {\n              // if value is truthy and a duplicate, break\n              if (_attrs[prop] && _attrs[prop] === allAttributes[prop][j]) {\n                unique = false;\n                break;\n              } // if tested all items && unique == true\n\n\n              if (j === allAttributes[prop].length - 1 && _attrs[prop] && unique === true) {\n                console.log('unique! _attrs[prop]', _attrs[prop]);\n                allAttributes[prop].push(_attrs[prop]);\n              }\n            }\n          } else {\n            // test if value is truthy and unique\n            if (_attrs[prop] && _attrs[prop] !== allAttributes[prop][0]) {\n              console.log('val is truthy', _attrs[prop]);\n              allAttributes[prop].push(_attrs[prop]);\n            }\n          }\n        }\n      }\n    } // Sort Attributes Alphabetically\n\n\n    for (let prop in allAttributes) {\n      if (allAttributes.hasOwnProperty(prop)) {\n        allAttributes[prop].sort((a, b) => {\n          let valueA = a.toUpperCase();\n          let valueB = b.toUpperCase();\n\n          if (valueA < valueB) {\n            return -1;\n          }\n\n          if (valueB > valueA) {\n            return 1;\n          }\n\n          return 0;\n        });\n      }\n    }\n\n    console.log('allAttributes', allAttributes);\n    return allAttributes;\n  }\n  /**\n   * Collect All Product Variation Attributes\n   *\n   * @return boolean|object Product Variations and Attributes matching test\n   */\n\n\n  function collectAllProductVariationAttributes() {\n    console.log('collectAllProductVariationAttributes');\n\n    let _productIds = state.variations.map((value, index) => index);\n\n    let allAttributes = {};\n\n    for (let i = 0; i < _productIds.length; i++) {\n      let index = _productIds[i]; // the index of the matched Product Variation\n      // iterate through variation attributes object\n\n      let _attrs = state.variations[index].attributes;\n\n      for (let prop in _attrs) {\n        if (!_attrs.hasOwnProperty(prop)) {\n          continue;\n        } // check if key exists in allAttributes object\n\n\n        if (!allAttributes[prop]) {\n          // add it as new key and initialize it as array\n          allAttributes[prop] = []; // add current value to array if truthy\n\n          if (_attrs[prop]) {\n            allAttributes[prop].push(_attrs[prop]);\n          }\n        } else {\n          // key already exists in allAttributes object\n          // test for value uniqueness\n          if (allAttributes[prop].length) {\n            for (let j = 0, unique = true; j < allAttributes[prop].length; j++) {\n              // if value is truthy and a duplicate, break\n              if (_attrs[prop] && _attrs[prop] === allAttributes[prop][j]) {\n                unique = false;\n                break;\n              } // if tested all items && unique == true\n\n\n              if (j === allAttributes[prop].length - 1 && _attrs[prop] && unique === true) {\n                allAttributes[prop].push(_attrs[prop]);\n              }\n            }\n          } else {\n            // test if value is truthy and unique\n            if (_attrs[prop] && _attrs[prop] !== allAttributes[prop][0]) {\n              allAttributes[prop].push(_attrs[prop]);\n            }\n          }\n        }\n      }\n    } // Sort Attributes\n\n\n    for (let prop in allAttributes) {\n      if (allAttributes.hasOwnProperty(prop)) {\n        allAttributes[prop].sort((a, b) => {\n          let valueA = a.toUpperCase();\n          let valueB = b.toUpperCase();\n\n          if (valueA < valueB) {\n            return -1;\n          }\n\n          if (valueA > valueB) {\n            return 1;\n          }\n\n          return 0;\n        });\n      }\n    }\n\n    return allAttributes;\n  }\n  /**\n   * Render the Product Variation Attributes\n   *\n   * @param {object} data the data to render\n   */\n\n\n  function render(data) {\n    for (const attr in data.variationAttrs) {\n      if (!data.variationAttrs.hasOwnProperty(attr)) {\n        continue;\n      } // create a <div> for each attributes\n\n\n      let div = document.createElement('div');\n      div.className = 'select-wrap'; // create a <label> for each attribute\n\n      let label = document.createElement('label');\n      label.htmlFor = 'select-' + attr;\n      label.className = 'visuallyhidden';\n      label.appendChild(document.createTextNode(data.variationLabels[attr])); // create a <select> for each attribute\n\n      let select = document.createElement('select');\n      select.id = 'select-' + attr; // create the default <option> for this <select>\n\n      let optionDefault = document.createElement('option');\n      optionDefault.value = '';\n      optionDefault.appendChild(document.createTextNode(data.variationLabels[attr] + '...'));\n      select.appendChild(optionDefault); // create an <option> for each term\n\n      for (let i = 0, terms = data.variationAttrs[attr]; i < terms.length; i++) {\n        let option = document.createElement('option');\n        option.value = terms[i];\n        option.appendChild(document.createTextNode(data.termData[terms[i]]));\n        select.appendChild(option);\n      }\n\n      div.appendChild(label);\n      div.appendChild(select);\n      $productVariations.append(div); // $productVariations.append(select);\n      // $selects = null;\n      // $selects = $productVariations.find('select');\n    } // cache <select> els\n\n\n    $selects = $productVariations.find('select');\n  }\n  /**\n   * Update Product Variation values\n   * @param {object} attributes the Product Variation Attributes\n   */\n\n\n  function updateVariationValues(attributes) {\n    for (const prop in attributes) {\n      // get selectId\n      let selectId = prop.replace('attribute_', 'select-'); // skip <select> els with value\n\n      if (state.selectedAttrs[selectId]) {\n        continue;\n      }\n\n      let $select = jQuery('#' + selectId);\n      let defaultSelect = $select.get(0).options[0];\n      $select.empty();\n      $select.append(defaultSelect); // create an <option> for each term\n\n      for (let j = 0, terms = attributes[prop]; j < terms.length; j++) {\n        let option = document.createElement('option');\n        option.value = terms[j];\n        option.appendChild(document.createTextNode(state.termData[terms[j]]));\n        $select.append(option);\n      }\n    }\n  }\n  /**\n   * Reset variation values if all <select> elements are set to default values\n   * @return {boolean} true if reset. false otherwise.\n   */\n\n\n  function maybeResetVariationValues() {\n    console.log('maybeResetVariationValues'); // check if all state.selectedAttrs are all null\n\n    for (const prop in state.selectedAttrs) {\n      // if a <select> has a value, don't reset\n      if (state.selectedAttrs[prop] !== null) {\n        return false;\n      }\n    }\n\n    resetVariationValues();\n    return true;\n  }\n  /**\n   * Reset Variation values to their defaults\n   */\n\n\n  function resetVariationValues() {\n    console.log('resetVariationValues');\n    $productVariations.empty();\n    render(state);\n  }\n  /**\n   * Render Product details\n   * @param {object} data the Product data\n   */\n\n\n  function renderProductDetails(data) {\n    $songArtist.text(data.artist);\n    $songImage.attr('src', data.image);\n    $songImage.attr('alt', data.title);\n    $songLink.attr('data-song-artist', data.artist);\n    $songLink.attr('data-song-id', data.id);\n    $songLink.attr('data-song-image', data.image);\n    $songLink.attr('data-song-title', data.title);\n    $songLink.attr('data-song-url', data.url);\n    $songTitle.text(data.title);\n  }\n  /**\n   * Reset License Dialog\n   */\n\n\n  function reset() {\n    $songArtist.text('');\n    $songImage.attr('src', '#');\n    $songImage.attr('alt', '');\n    $songLink.attr('data-song-artist', '');\n    $songLink.attr('data-song-id', '');\n    $songLink.attr('data-song-image', '');\n    $songLink.attr('data-song-title', '');\n    $songLink.attr('data-song-url', '');\n    $songTitle.text('');\n    $productVariations.empty();\n    _Utilities_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setState({\n      'individualType': false\n    }, state);\n  }\n\n  return {\n    init\n  };\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (licenseDialog);\n\n//# sourceURL=webpack:///./assets/js/src/licenseDialog.js?");

/***/ }),

/***/ "./assets/js/src/musicList.js":
/*!************************************!*\
  !*** ./assets/js/src/musicList.js ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Events_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Events.js */ \"./assets/js/src/Events.js\");\n/* harmony import */ var _Utilities_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Utilities.js */ \"./assets/js/src/Utilities.js\");\n/* harmony import */ var _Favorites_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Favorites.js */ \"./assets/js/src/Favorites.js\");\n\n\n\n\nconst musicList = function () {\n  const ID_LICENSE_DIALOG = 'license-dialog',\n        ID_MUSIC_LIST_TABLE = 'music-list__table',\n        CLASS_BTN_FAVORITE = 'btn--favorite',\n        CLASS_BTN_IS_FAVORITE = 'btn--is-favorite',\n        CLASS_BTN_LICENSE = 'btn--license',\n        CLASS_BTN_PLAY_PAUSE = 'music-list__btn-play-pause',\n        CLASS_BTN_PLAY_PAUSE_LOADING = 'music-list__btn-play-pause--loading',\n        CLASS_BTN_PLAY_PAUSE_PLAYING = 'music-list__btn-play-pause--playing';\n  let $songList;\n\n  function init() {\n    if (cacheDom()) {\n      bindEvents();\n    }\n  }\n\n  function cacheDom() {\n    $songList = jQuery('#' + ID_MUSIC_LIST_TABLE);\n    return $songList.length ? true : false;\n  }\n\n  function bindEvents() {\n    // Music List Table\n    $songList.on('click', '.' + CLASS_BTN_PLAY_PAUSE, handleClickPlayPause);\n    $songList.on('click', '.' + CLASS_BTN_FAVORITE, handleClickFavorite);\n    $songList.on('click', '.' + CLASS_BTN_LICENSE, handleClickLicense);\n    _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].on('songStateChange', handleSongStateChange, this);\n    _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].on('createFavoriteSuccess', handleCreateFavoriteSuccess, this);\n    _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].on('deleteFavoriteSuccess', handleDeleteFavoriteSuccess, this);\n    _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].on('closeLicenseDialog', handleCloseLicenseDialog, this);\n  }\n\n  function handleClickPlayPause(e) {\n    e.preventDefault();\n    _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].trigger('clickPlayPauseList', e);\n  }\n\n  function handleClickFavorite(e) {\n    e.preventDefault();\n\n    if (e.currentTarget.dataset.redirectUrl) {\n      _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].trigger('openConfirmDialog', e);\n      return;\n    }\n\n    const id = e.currentTarget.dataset.songId;\n    const isFavorite = Number(e.currentTarget.dataset.isFavorite);\n\n    if (isFavorite) {\n      _Favorites_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].deleteFavorite(id);\n    } else {\n      _Favorites_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].createFavorite(id);\n    }\n  }\n\n  function handleClickLicense(e) {\n    e.preventDefault();\n\n    if (e.currentTarget.dataset.redirectUrl) {\n      _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].trigger('openConfirmDialog', e);\n      return;\n    }\n\n    this.disabled = true; // get product data for license dialog\n\n    const data = {\n      'artist': this.dataset.songArtist,\n      'id': this.dataset.songId,\n      'image': this.dataset.songImage,\n      'title': this.dataset.songTitle,\n      'url': this.dataset.songUrl\n    }; // set product data for license dialog\n\n    _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].trigger('clickLicense', data); // init Magnific Popup\n\n    jQuery(this).magnificPopup({\n      // alignTop: true,\n      type: 'inline',\n      mainClass: 'mfp-license-popup mfp-fade',\n      closeOnBgClick: true,\n      removalDelay: 300,\n      closeMarkup: '<button title=\"%title%\" type=\"button\" class=\"mfp-close\">&times;</button>',\n      callbacks: {\n        open: function () {\n          _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].trigger('mfpOpenLicenseDialog');\n        },\n        close: function () {\n          _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].trigger('mfpCloseLicenseDialog');\n        }\n      }\n    }).magnificPopup('open');\n  }\n\n  function handleSongStateChange(id, isLoading = false) {\n    let $songItem = $songList.find('button[data-song-id=' + id + '].music-list__btn-play-pause');\n\n    if (!$songItem.length) {\n      console.log('musicList no match found for Product ID: ', id);\n      return;\n    }\n\n    if (isLoading) {\n      $songItem.removeClass(CLASS_BTN_PLAY_PAUSE_PLAYING).addClass(CLASS_BTN_PLAY_PAUSE_LOADING).find('span').text('Loading');\n    } else if ($songItem.hasClass(CLASS_BTN_PLAY_PAUSE_PLAYING)) {\n      $songItem.removeClass(CLASS_BTN_PLAY_PAUSE_LOADING).removeClass(CLASS_BTN_PLAY_PAUSE_PLAYING).find('span').text('Play');\n    } else {\n      $songItem.removeClass(CLASS_BTN_PLAY_PAUSE_LOADING).addClass(CLASS_BTN_PLAY_PAUSE_PLAYING).find('span').text('Pause');\n    }\n  }\n\n  function handleCreateFavoriteSuccess(id) {\n    $songList.find('button[data-song-id=\"' + id + '\"].' + CLASS_BTN_FAVORITE).attr('data-is-favorite', 1).addClass(CLASS_BTN_IS_FAVORITE);\n  }\n\n  function handleDeleteFavoriteSuccess(id) {\n    $songList.find('button[data-song-id=\"' + id + '\"].' + CLASS_BTN_FAVORITE).attr('data-is-favorite', 0).removeClass(CLASS_BTN_IS_FAVORITE);\n  }\n\n  function handleCloseLicenseDialog(id) {\n    _Utilities_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].closeMagnificPopup();\n    let $btnLicense = $songList.find('button[data-song-id=' + id + '].btn--license');\n\n    if (!$btnLicense.length) {\n      return;\n    }\n\n    $btnLicense.removeAttr('disabled');\n  }\n\n  return {\n    init\n  };\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (musicList);\n\n//# sourceURL=webpack:///./assets/js/src/musicList.js?");

/***/ }),

/***/ "./assets/js/src/musicListFilters.js":
/*!*******************************************!*\
  !*** ./assets/js/src/musicListFilters.js ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Events_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Events.js */ \"./assets/js/src/Events.js\");\n/* harmony import */ var _Utilities_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Utilities.js */ \"./assets/js/src/Utilities.js\");\n/* harmony import */ var _Favorites_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Favorites.js */ \"./assets/js/src/Favorites.js\");\n\n\n\n\nconst musicListFilters = function () {\n  const FORM_FILTERS_ID = 'music-list-filters',\n        MUSIC_LIST_ID = 'music-list',\n        MUSIC_LIST_BODY = MUSIC_LIST_ID + '__body',\n        MFP_POPUP_ID = 'license-dialog',\n        // Magnific Popup\n  CLASS_LOADING = 'music-list--loading',\n        BTN_LOAD_MORE = 'btn--load-more';\n  let $formFilters, $musicList, $musicListTable, $btnLoadMore, fnMusicListRow_, fnMusicListRowError_;\n  let state = {\n    btnLoadMore: false,\n    maxNumPages: 1,\n    page: 1,\n    queryArgs: []\n  };\n\n  function init() {\n    if (cacheDom()) {\n      $musicList.toggleClass(CLASS_LOADING);\n      bindEvents();\n      getFavorites();\n    }\n  }\n\n  function cacheDom() {\n    $formFilters = jQuery('#' + FORM_FILTERS_ID);\n    $musicList = jQuery('#' + MUSIC_LIST_ID);\n    $musicListTable = $musicList.find('.' + MUSIC_LIST_BODY);\n    $btnLoadMore = $musicList.find('.' + BTN_LOAD_MORE); // js templates\n\n    fnMusicListRow_ = wp.template('music-list-row');\n    fnMusicListRowError_ = wp.template('music-list-row-error');\n    return $formFilters.length ? true : false;\n  }\n\n  function bindEvents() {\n    $formFilters.on('submit', handleSubmit);\n    $btnLoadMore.on('click', handleLoadMore);\n    _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].on('getFavoritesDone', handleGetFavorites, this);\n    _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].on('getFavoritesFail', handleGetFavorites, this);\n    _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].on('getPostsDone', handleGetPostsDone, this);\n    _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].on('getPostsFail', handleGetPostsFail, this);\n  }\n\n  function getFavorites() {\n    _Favorites_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getFavorites();\n  }\n\n  function handleGetFavorites() {\n    _Utilities_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getPosts(state.queryArgs, 1, ml_js_data.nonce_get_products);\n  }\n\n  function handleGetPostsDone(data, page, append) {\n    // set Pagination data\n    _Utilities_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setState({\n      'maxNumPages': data.data.max_num_pages,\n      'page': data.data.page\n    }, state);\n\n    if (page < data.data.max_num_pages) {\n      _Utilities_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setState({\n        'btnLoadMore': true\n      }, state);\n      showLoadMore();\n    } else {\n      _Utilities_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setState({\n        'btnLoadMore': false\n      }, state);\n      hideLoadMore();\n    }\n\n    render(data.data.products, append);\n  }\n\n  function handleGetPostsFail(errorThrown) {\n    console.log('getPostsFail: ', errorThrown);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault(); // reset state pagination data\n\n    resetPaginationState(); // process form data\n\n    let formData = processFormData(e); // set form data for \"load more\" requests\n\n    saveQueryArgs(formData); // get the posts\n\n    $musicList.addClass(CLASS_LOADING);\n    _Utilities_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getPosts(state.queryArgs, 1, ml_js_data.nonce_get_products);\n  }\n\n  function handleLoadMore() {\n    $musicList.addClass(CLASS_LOADING);\n    _Utilities_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getPosts(state.queryArgs, ++state.page, ml_js_data.nonce_get_products, true);\n  }\n\n  function processFormData(e) {\n    let data = [];\n\n    for (let i = 0; i < e.target.elements.length; i++) {\n      if (e.target.elements[i].tagName === 'SELECT' && e.target.elements[i].value !== '') {\n        data.push({\n          taxName: e.target.elements[i].dataset.taxonomyName,\n          termValue: e.target.elements[i].value\n        });\n      }\n    }\n\n    return data;\n  }\n\n  function saveQueryArgs(data) {\n    _Utilities_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setState({\n      'queryArgs': data\n    }, state);\n  }\n\n  function resetPaginationState() {\n    _Utilities_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setState({\n      'maxNumPages': 1,\n      'page': 1\n    }, state);\n  }\n\n  function showLoadMore() {\n    $btnLoadMore.css('display', 'inline-block');\n  }\n\n  function hideLoadMore() {\n    $btnLoadMore.css('display', 'none');\n  }\n\n  function render(data, append = false) {\n    if (!append) {\n      resetList();\n    }\n\n    $musicList.removeClass(CLASS_LOADING);\n\n    if (data.length) {\n      for (let i = 0; i < data.length; i++) {\n        // check if item is current_song_id and is playing\n        data[i].isCurrentSongPlaying = _Utilities_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isCurrentSong(data[i].id) && _Utilities_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isCurrentSongPlaying() ? true : false; // check if item is in the user's favorites\n\n        data[i].isFavorite = _Favorites_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].isFavorite(data[i].id); // check if user is logged in\n\n        data[i].isUserLoggedIn = _Utilities_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isUserLoggedIn(); // pass the data to the template function\n\n        $musicListTable.append(fnMusicListRow_(data[i]));\n      }\n    } else {\n      let data = {\n        message: 'No Products Found'\n      };\n      $musicListTable.append(fnMusicListRowError_(data));\n    }\n  }\n\n  function resetList() {\n    $musicListTable.empty(); // removes elements and listeners\n  }\n\n  return {\n    init\n  };\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (musicListFilters);\n\n//# sourceURL=webpack:///./assets/js/src/musicListFilters.js?");

/***/ }),

/***/ "./assets/js/src/player.js":
/*!*********************************!*\
  !*** ./assets/js/src/player.js ***!
  \*********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Events_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Events.js */ \"./assets/js/src/Events.js\");\n/* harmony import */ var _Utilities_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Utilities.js */ \"./assets/js/src/Utilities.js\");\n\n\n\nconst player = function () {\n  const ID_PLAYER = 'player',\n        ID_WAVEFORM = 'player__waveform',\n        CLASS_PLAY_PAUSE = 'player__btn-play-pause',\n        CLASS_SONG_IMAGE = 'player__song-image',\n        CLASS_SONG_TITLE = 'player__song-title',\n        CLASS_SONG_ARTIST = 'player__song-artist',\n        CLASS_LOADING = 'player__btn-play-pause--loading',\n        CLASS_PLAYING = 'player__btn-play-pause--playing';\n  let $player, $wavesurfer, $waveform, $playPause, $songTitle, $songArtist, $songImage;\n  let state = {\n    isDefaultSong: false,\n    // true when default song is initialized\n    isLoading: false,\n    isPlaying: false,\n    currSongId: null,\n    prevSongId: null,\n    songTitle: null,\n    songArtist: null,\n    songImage: null\n  };\n\n  function init() {\n    if (cacheDom()) {\n      bindEvents();\n      initWaveSurfer();\n      initDefaultSong();\n    }\n  }\n\n  function cacheDom() {\n    $player = jQuery('#' + ID_PLAYER);\n    $waveform = $player.find('#' + ID_WAVEFORM);\n    $playPause = $player.find('.' + CLASS_PLAY_PAUSE);\n    $songTitle = $player.find('.' + CLASS_SONG_TITLE);\n    $songArtist = $player.find('.' + CLASS_SONG_ARTIST);\n    $songImage = $player.find('.' + CLASS_SONG_IMAGE + ' img');\n    return $player.length ? true : false;\n  }\n\n  function bindEvents() {\n    $playPause.on('click', handleClickPlayerPlayPause);\n    _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].on('clickPlayPauseList', handleClickPlayPauseList, this);\n  }\n\n  function handleClickPlayerPlayPause() {\n    if (isPlaying()) {\n      pauseSong();\n    } else {\n      playSong();\n    }\n\n    updatePlayerButton();\n    _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].trigger('songStateChange', state.currSongId);\n  }\n\n  function handleClickPlayPauseList(e) {\n    const id = e.currentTarget.dataset.songId;\n    const url = e.currentTarget.dataset.songUrl;\n    const songTitle = e.currentTarget.dataset.songTitle;\n    const songArtist = e.currentTarget.dataset.songArtist;\n    const songImage = e.currentTarget.dataset.songImage; // Load song if different than current\n\n    if (id !== state.currSongId) {\n      // set the prevSongId locally\n      _Utilities_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setState({\n        'prevSongId': state.currSongId\n      }, state); // set the currSongId locally\n\n      _Utilities_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setState({\n        'isDefaultSong': false,\n        'currSongId': id,\n        'songArtist': songArtist,\n        'songImage': songImage,\n        'songTitle': songTitle\n      }, state); // set the currSongId globally (in play())\n      // utils.setCurrentSongId(id);\n      // pause prev song\n\n      if (isPlaying()) {\n        pauseSong();\n        updatePlayerButton();\n        _Utilities_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setCurrentSongPlayingState(false); // trigger songStateChange for subscribed modules (UI updates, etc)\n\n        _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].trigger('songStateChange', state.prevSongId);\n      } // load the new song\n\n\n      loadSong(url); // @NOTE async\n    } else {\n      if (isPlaying()) {\n        pauseSong();\n      } else {\n        playSong();\n      }\n\n      updatePlayerButton();\n      _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].trigger('songStateChange', state.currSongId);\n    }\n  }\n\n  function isPlaying() {\n    return state.isPlaying;\n  }\n\n  function initDefaultSong() {\n    const songId = ml_js_data.default_song.id;\n    const songUrl = ml_js_data.default_song.preview_song_url;\n    const songTitle = ml_js_data.default_song.title;\n    const songArtist = ml_js_data.default_song.artist;\n    const songImage = ml_js_data.default_song.song_image;\n    _Utilities_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setState({\n      'isDefaultSong': true,\n      'currSongId': songId,\n      'songArtist': songArtist,\n      'songImage': songImage,\n      'songTitle': songTitle\n    }, state);\n    updatePlayerDetails();\n    loadSong(songUrl); // @async\n  }\n\n  function initWaveSurfer() {\n    $wavesurfer = WaveSurfer.create({\n      container: $waveform.get(0),\n      barGap: 2,\n      barWidth: 1,\n      height: 70,\n      responsive: 200,\n      pixelRatio: 1,\n      scrollParent: false\n    });\n    $wavesurfer.on('ready', handleWaveSurferReady);\n    $wavesurfer.on('finish', handleWaveSurferFinish);\n  }\n\n  function handleWaveSurferReady() {\n    if (state.isDefaultSong) {\n      _Utilities_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setState({\n        'isLoading': false,\n        'isPlaying': false\n      }, state);\n      updatePlayerButtonDefault();\n      return;\n    }\n\n    playSong();\n    updatePlayerDetails();\n    updatePlayerButton();\n    _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].trigger('songStateChange', state.currSongId, state.isLoading);\n  }\n\n  function handleWaveSurferFinish() {\n    updatePlayerButton(); // set global state here for other modules to re-render proper UI state (e.g. AJAX)\n\n    _Utilities_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setCurrentSongPlayingState(false);\n    _Utilities_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setState({\n      'isLoading': false,\n      'isPlaying': false\n    }, state);\n    _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].trigger('songStateChange', state.currSongId);\n  }\n\n  function loadSong(url) {\n    $wavesurfer.load(url);\n    _Utilities_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setState({\n      'isLoading': true\n    }, state);\n    updatePlayerButton();\n    _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].trigger('songStateChange', state.currSongId, state.isLoading);\n  }\n\n  function playSong() {\n    $wavesurfer.play();\n    _Utilities_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setState({\n      'isLoading': false,\n      'isPlaying': true\n    }, state);\n    _Utilities_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setCurrentSongId(state.currSongId, state.isLoading);\n    _Utilities_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setCurrentSongPlayingState(true);\n  }\n\n  function pauseSong() {\n    $wavesurfer.pause();\n    _Utilities_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setState({\n      'isLoading': false,\n      'isPlaying': false\n    }, state);\n    _Utilities_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setCurrentSongPlayingState(false);\n  }\n\n  function stopSong() {\n    $wavesurfer.stop();\n    _Utilities_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setState({\n      'isLoading': false,\n      'isPlaying': false\n    }, state);\n    _Utilities_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setCurrentSongPlayingState(false);\n  }\n\n  function updatePlayerButton() {\n    if (state.isLoading) {\n      $playPause.removeClass(CLASS_PLAYING).addClass(CLASS_LOADING).find('span').text('Loading');\n    } else if ($playPause.hasClass(CLASS_PLAYING)) {\n      $playPause.removeClass(CLASS_PLAYING).removeClass(CLASS_LOADING).find('span').text('Play');\n    } else {\n      $playPause.removeClass(CLASS_LOADING).addClass(CLASS_PLAYING).find('span').text('Pause');\n    }\n  }\n\n  function updatePlayerButtonDefault() {\n    $playPause.removeClass(CLASS_LOADING).find('span').text('Play');\n  }\n  /**\n   * Update player with selected song data\n   */\n\n\n  function updatePlayerDetails() {\n    $songImage.attr('src', state.songImage);\n    $songImage.attr('alt', state.songTitle);\n    $songTitle.text(state.songTitle);\n    $songArtist.text(state.songArtist);\n  }\n\n  return {\n    init\n  };\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (player);\n\n//# sourceURL=webpack:///./assets/js/src/player.js?");

/***/ }),

/***/ "./assets/js/src/popupPlayer.js":
/*!**************************************!*\
  !*** ./assets/js/src/popupPlayer.js ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Events_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Events.js */ \"./assets/js/src/Events.js\");\n\n\nconst popupPlayer = function () {\n  const CLASS_PROJECT_POSTS_WRAP = 'project-posts',\n        CLASS_POPUP = 'open-popup-player',\n        CLASS_PRODUCT_LINK = 'popup-player__product-link',\n        CLASS_LOCK = 'popup-player__product-link--lock',\n        CLASS_LOADING = 'popup-player__product-link--loading',\n        CLASS_PLAY = 'popup-player__product-link--play',\n        CLASS_PLAYING = 'popup-player__product-link--playing',\n        CLASS_PLAYING_TR = 'popup-player__table-tr--playing';\n  let $projectsWrap, $popupPlayer;\n\n  function init() {\n    if (cacheDom()) {\n      bindEvents();\n      initMagnificPopup();\n      initMatchHeight();\n    }\n  }\n\n  function cacheDom() {\n    $projectsWrap = jQuery('.' + CLASS_PROJECT_POSTS_WRAP);\n    $popupPlayer = jQuery('.popup-player'); // delegation\n\n    return $projectsWrap.length ? true : false;\n  }\n\n  function bindEvents() {\n    $popupPlayer.on('click', '.' + CLASS_PRODUCT_LINK, handleClickSongLink);\n    _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].on('songStateChange', handleSongStateChange, this);\n  }\n\n  function initMatchHeight() {\n    jQuery('.matchHeight--byRow').matchHeight({\n      byRow: true\n    });\n  }\n\n  function initMagnificPopup() {\n    $projectsWrap.magnificPopup({\n      delegate: '.' + CLASS_POPUP,\n      // alignTop: true,\n      type: 'inline',\n      mainClass: 'mfp-player-popup mfp-fade',\n      closeOnBgClick: true,\n      removalDelay: 300,\n      closeMarkup: '<button title=\"%title%\" type=\"button\" class=\"mfp-close\">&times;</button>'\n    });\n  }\n\n  function handleClickSongLink(e) {\n    e.preventDefault();\n    e.stopImmediatePropagation();\n\n    if (itemIsLocked(e)) {\n      handleSongLinkLock(e);\n    } else {\n      _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].trigger('clickPlayPauseList', e);\n    }\n  }\n\n  function handleSongLinkLock(e) {\n    _Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].trigger('openConfirmDialog', e);\n    return;\n  }\n  /**\n   * Update popup player UI\n   *\n   * @param {Number} id the product id\n   * @param {Boolean} isLoading true if song is loading\n   */\n\n\n  function handleSongStateChange(id, isLoading) {\n    let $songItem = $popupPlayer.find('a[data-song-id=\"' + id + '\"].' + CLASS_PRODUCT_LINK);\n\n    if (!$songItem.length) {\n      return;\n    }\n\n    if (isLoading) {\n      handleSongLinkLoad($songItem);\n    } else if (!isLoading && ($songItem.hasClass(CLASS_PLAY) || $songItem.hasClass(CLASS_LOADING))) {\n      handleSongLinkPlay($songItem);\n    } else {\n      handleSongLinkPause($songItem);\n    }\n  }\n\n  function handleSongLinkLoad($songItem) {\n    loadSong($songItem);\n  }\n\n  function handleSongLinkPlay($songItem) {\n    playSong($songItem);\n  }\n\n  function handleSongLinkPause($songItem) {\n    pauseSong($songItem);\n  }\n\n  function loadSong($songItem) {\n    $songItem.removeClass(CLASS_PLAY).addClass(CLASS_LOADING);\n  }\n\n  function playSong($songItem) {\n    $songItem.removeClass(CLASS_PLAY).removeClass(CLASS_LOADING).addClass(CLASS_PLAYING).closest('tr').addClass(CLASS_PLAYING_TR);\n  }\n\n  function pauseSong($songItem) {\n    $songItem.removeClass(CLASS_PLAYING).addClass(CLASS_PLAY).closest('tr').removeClass(CLASS_PLAYING_TR);\n  }\n\n  function itemIsLocked(e) {\n    return jQuery(e.target).hasClass(CLASS_LOCK) ? true : false;\n  }\n\n  return {\n    init\n  };\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (popupPlayer);\n\n//# sourceURL=webpack:///./assets/js/src/popupPlayer.js?");

/***/ })

/******/ });